# κ²μ„ κΈ°λ¥ μ¶”κ°€ μ μ•μ„

## π® μμμ—…μ μ»¤λ®¤λ‹ν‹°μ— μ ν•©ν• κ²μ„ μ•„μ΄λ””μ–΄

### 1. **μ‚¬μ¥λ‹ μ΄μ„Έ κ²μ„** β­ (μ¶”μ²)
- **κ°λ…**: λ§¤μΌ λ‹¤λ¥Έ μ΄μ„Έλ¥Ό ν™•μΈν•κ³ , μΆ‹μ€ μ΄μ„Έλ¥Ό λ°›μΌλ©΄ ν¬μΈνΈ νλ“
- **κµ¬ν„ λ‚μ΄λ„**: β­β­ (μ‰¬μ›€)
- **κΈ°λ¥**:
  - μΌμΌ μ΄μ„Έ ν™•μΈ (ν•λ£¨ 1ν)
  - μ΄μ„Έμ— λ”°λΌ ν¬μΈνΈ μ§€κΈ‰ (λ€κΈΈ: +10, κΈΈ: +5, ν‰: +2)
  - μ—°μ† μ¶μ„ λ³΄λ„μ¤
- **μ„μΉ**: κΈ°μ΅΄ "μ΄μ„Έλ³΄κΈ°" λ©”λ‰΄μ— ν†µν•©

### 2. **μ‚¬μ¥λ‹ ν€΄μ¦ κ²μ„** π§ 
- **κ°λ…**: μμμ—… κ΄€λ ¨ ν€΄μ¦λ¥Ό ν’€κ³  ν¬μΈνΈ νλ“
- **κµ¬ν„ λ‚μ΄λ„**: β­β­β­ (λ³΄ν†µ)
- **κΈ°λ¥**:
  - μΌμΌ ν€΄μ¦ (ν•λ£¨ 3λ¬Έμ )
  - μ •λ‹µ μ‹ ν¬μΈνΈ νλ“ (+5μ )
  - μ—°μ† μ •λ‹µ λ³΄λ„μ¤
  - μ£Όκ°„ ν€΄μ¦ μ±λ¦°μ§€
- **μ„μΉ**: μƒλ΅μ΄ "κ²μ„" λ©”λ‰΄ λλ” ν•λ‹¨ λ„¤λΉ„κ²μ΄μ…

### 3. **λ³µκ¶/μ¶”μ²¨ κ²μ„** π°
- **κ°λ…**: ν¬μΈνΈλ¥Ό μ‚¬μ©ν•μ—¬ λ³µκ¶μ„ κµ¬λ§¤ν•κ³  λ‹Ήμ²¨ μ‹ ν¬μΈνΈ νλ“
- **κµ¬ν„ λ‚μ΄λ„**: β­β­β­ (λ³΄ν†µ)
- **κΈ°λ¥**:
  - μΌμΌ λ¬΄λ£ λ³µκ¶ 1μ¥
  - ν¬μΈνΈλ΅ μ¶”κ°€ λ³µκ¶ κµ¬λ§¤ (10ν¬μΈνΈ = 1μ¥)
  - λ‹Ήμ²¨ μ‹ ν¬μΈνΈ μ§€κΈ‰ (10~1000μ  λλ¤)
  - λ‹Ήμ²¨ ν™•λ¥ : 70% (μ†μ•΅), 20% (μ¤‘μ•΅), 9% (λ€μ•΅), 1% (μµλ€μ•΅)
- **μ„μΉ**: κ²μ„ λ©”λ‰΄

### 4. **μ‚¬μ¥λ‹ λλ¤ λ°•μ¤** π“¦
- **κ°λ…**: ν¬μΈνΈλ΅ λλ¤ λ°•μ¤λ¥Ό μ—΄κ³  λ‹¤μ–‘ν• λ³΄μƒ νλ“
- **κµ¬ν„ λ‚μ΄λ„**: β­β­ (μ‰¬μ›€)
- **κΈ°λ¥**:
  - μΌλ° λ°•μ¤ (50ν¬μΈνΈ): μ†μ•΅ ν¬μΈνΈ, λ°°μ§€
  - κ³ κΈ‰ λ°•μ¤ (200ν¬μΈνΈ): μ¤‘μ•΅ ν¬μΈνΈ, νΉλ³„ λ°°μ§€
  - ν”„λ¦¬λ―Έμ—„ λ°•μ¤ (500ν¬μΈνΈ): λ€μ•΅ ν¬μΈνΈ, ν¬κ·€ λ°°μ§€
- **μ„μΉ**: κ²μ„ λ©”λ‰΄

### 5. **κ°„λ‹¨ν• νΌμ¦ κ²μ„** π§©
- **κ°λ…**: κ°„λ‹¨ν• μ«μ νΌμ¦μ΄λ‚ λ‹¨μ–΄ λ§μ¶”κΈ°
- **κµ¬ν„ λ‚μ΄λ„**: β­β­β­β­ (μ–΄λ ¤μ›€)
- **κΈ°λ¥**:
  - 2048 μ¤νƒ€μΌ μ«μ νΌμ¦
  - μμμ—… κ΄€λ ¨ λ‹¨μ–΄ λ§μ¶”κΈ°
  - μ μμ— λ”°λΌ ν¬μΈνΈ μ§€κΈ‰
- **μ„μΉ**: κ²μ„ λ©”λ‰΄

### 6. **μ‚¬μ¥λ‹ λ£°λ ›** π΅
- **κ°λ…**: μΌμΌ λ¬΄λ£ λ£°λ ›μΌλ΅ ν¬μΈνΈλ‚ λ³΄μƒ νλ“
- **κµ¬ν„ λ‚μ΄λ„**: β­β­ (μ‰¬μ›€)
- **κΈ°λ¥**:
  - ν•λ£¨ 1ν λ¬΄λ£ λ£°λ ›
  - ν¬μΈνΈλ΅ μ¶”κ°€ νμ „ (20ν¬μΈνΈ)
  - λ‹¤μ–‘ν• λ³΄μƒ (ν¬μΈνΈ, λ°°μ§€, νΉλ³„ ννƒ)
- **μ„μΉ**: κ²μ„ λ©”λ‰΄

## π― μ¶”μ² κµ¬ν„ μμ„

### Phase 1: κ°„λ‹¨ν• κ²μ„ (λΉ λ¥Έ κµ¬ν„)
1. **μ‚¬μ¥λ‹ μ΄μ„Έ κ²μ„** - κΈ°μ΅΄ μ΄μ„Έ λ©”λ‰΄ ν™•μ¥
2. **μ‚¬μ¥λ‹ λ£°λ ›** - κ°„λ‹¨ν•κ³  μ¬λ―Έμμ

### Phase 2: μ¤‘κ°„ λ‚μ΄λ„ κ²μ„
3. **λ³µκ¶/μ¶”μ²¨ κ²μ„** - ν¬μΈνΈ μ‹μ¤ν…κ³Ό μ—°λ™
4. **μ‚¬μ¥λ‹ λλ¤ λ°•μ¤** - ν¬μΈνΈ μ†λΉ„ μ λ„

### Phase 3: κ³ κΈ‰ κ²μ„
5. **μ‚¬μ¥λ‹ ν€΄μ¦ κ²μ„** - μ½ν…μΈ  κ΄€λ¦¬ ν•„μ”
6. **νΌμ¦ κ²μ„** - λ³µμ΅ν• λ΅μ§

## π“± UI/UX λ””μμΈ

### κ²μ„ λ©”λ‰΄ μ¶”κ°€
```
ν•λ‹¨ λ„¤λΉ„κ²μ΄μ…:
[ν™] [μ—…μΆ…λ³„] [μ§€μ—­λ³„] [κ²μ„] [λ§μ΄]
```

### κ²μ„ νμ΄μ§€ λ μ΄μ•„μ›ƒ
```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  π® κ²μ„ μ„Όν„°           β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚  β”β”€β”€β”€β”€β”€β”  β”β”€β”€β”€β”€β”€β”      β”‚
β”‚  β”‚ π΅  β”‚  β”‚ π“¦  β”‚      β”‚
β”‚  β”‚λ£°λ › β”‚  β”‚λ°•μ¤ β”‚      β”‚
β”‚  β””β”€β”€β”€β”€β”€β”  β””β”€β”€β”€β”€β”€β”      β”‚
β”‚  β”β”€β”€β”€β”€β”€β”  β”β”€β”€β”€β”€β”€β”      β”‚
β”‚  β”‚ π°  β”‚  β”‚ β­  β”‚      β”‚
β”‚  β”‚λ³µκ¶ β”‚  β”‚μ΄μ„Έ β”‚      β”‚
β”‚  β””β”€β”€β”€β”€β”€β”  β””β”€β”€β”€β”€β”€β”      β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

## π’Ύ λ°μ΄ν„° κµ¬μ΅°

### Firestore: `user_games` μ»¬λ ‰μ…
```typescript
{
  userId: string
  lastFortuneDate: string        // λ§μ§€λ§‰ μ΄μ„Έ ν™•μΈ λ‚ μ§
  fortuneStreak: number           // μ—°μ† μ΄μ„Έ ν™•μΈ μΌμ
  lastRouletteDate: string        // λ§μ§€λ§‰ λ£°λ › λ‚ μ§
  lastLotteryDate: string         // λ§μ§€λ§‰ λ³µκ¶ λ‚ μ§
  totalGamesPlayed: number        // μ΄ κ²μ„ ν”λ μ΄ νμ
  totalPointsEarned: number       // κ²μ„μΌλ΅ νλ“ν• ν¬μΈνΈ
  achievements: string[]          // κ²μ„ μ—…μ 
  gameHistory: Array<{            // κ²μ„ λ‚΄μ—­
    gameType: 'fortune' | 'roulette' | 'lottery' | 'box'
    result: any
    pointsEarned: number
    timestamp: Timestamp
  }>
}
```

## π› οΈ κΈ°μ  κµ¬ν„ μμ‹

### 1. μ΄μ„Έ κ²μ„ μ»΄ν¬λ„νΈ
```typescript
// components/FortuneGame.tsx
'use client'

import { useState, useEffect } from 'react'
import { auth, db } from '@/lib/firebase'
import { doc, getDoc, updateDoc, serverTimestamp } from 'firebase/firestore'

const fortunes = [
  { type: 'λ€κΈΈ', message: 'μ¤λμ€ λ€λ°•λ‚ ! λ¨λ“  μΌμ΄ μμ΅°λ΅­κ² μ§„ν–‰λ©λ‹λ‹¤.', points: 10, emoji: 'π' },
  { type: 'κΈΈ', message: 'μΆ‹μ€ ν•λ£¨κ°€ λ  κ²ƒ κ°™μµλ‹λ‹¤.', points: 5, emoji: 'β¨' },
  { type: 'ν‰', message: 'λ¬΄λ‚ν• ν•λ£¨μ…λ‹λ‹¤.', points: 2, emoji: 'π' },
  { type: 'ν‰', message: 'μ΅°μ‹¬ν•μ„Έμ”. μ‹ μ¤‘ν•κ² κ²°μ •ν•μ„Έμ”.', points: 0, emoji: 'β οΈ' },
]

export default function FortuneGame() {
  const [user, setUser] = useState<any>(null)
  const [fortune, setFortune] = useState<any>(null)
  const [canPlay, setCanPlay] = useState(true)
  const [loading, setLoading] = useState(false)

  useEffect(() => {
    // λ΅κ·ΈμΈ μƒνƒ ν™•μΈ
    // μ¤λ μ΄λ―Έ μ΄μ„Έλ¥Ό λ΄¤λ”μ§€ ν™•μΈ
    checkCanPlay()
  }, [])

  const checkCanPlay = async () => {
    if (!user || !db) return
    
    const userGameRef = doc(db, 'user_games', user.uid)
    const userGameSnap = await getDoc(userGameRef)
    
    if (userGameSnap.exists()) {
      const data = userGameSnap.data()
      const today = new Date().toDateString()
      if (data.lastFortuneDate === today) {
        setCanPlay(false)
        // μ¤λ λ°›μ€ μ΄μ„Έ ν‘μ‹
        if (data.lastFortune) {
          setFortune(data.lastFortune)
        }
      }
    }
  }

  const playFortune = async () => {
    if (!user || !db || !canPlay) return

    setLoading(true)
    
    // λλ¤ μ΄μ„Έ μ„ νƒ
    const randomFortune = fortunes[Math.floor(Math.random() * fortunes.length)]
    
    try {
      // μ‚¬μ©μ κ²μ„ λ°μ΄ν„° μ—…λ°μ΄νΈ
      const userGameRef = doc(db, 'user_games', user.uid)
      const today = new Date().toDateString()
      
      await updateDoc(userGameRef, {
        lastFortuneDate: today,
        lastFortune: randomFortune,
        fortuneStreak: increment(1),
        totalGamesPlayed: increment(1),
        totalPointsEarned: increment(randomFortune.points),
      })

      // ν¬μΈνΈ μ¶”κ°€
      if (randomFortune.points > 0) {
        await addPoints(user.uid, randomFortune.points, 'μ΄μ„Έ κ²μ„ λ³΄μƒ')
      }

      setFortune(randomFortune)
      setCanPlay(false)
    } catch (error) {
      console.error('μ΄μ„Έ κ²μ„ μ¤λ¥:', error)
    } finally {
      setLoading(false)
    }
  }

  return (
    <div className="bg-white rounded-2xl p-6 shadow-lg">
      <h3 className="text-xl font-bold mb-4">μ‚¬μ¥λ‹ μ΄μ„Έ</h3>
      
      {fortune ? (
        <div className="text-center">
          <div className="text-6xl mb-4">{fortune.emoji}</div>
          <div className="text-2xl font-bold mb-2">{fortune.type}</div>
          <p className="text-gray-600 mb-4">{fortune.message}</p>
          {fortune.points > 0 && (
            <div className="text-green-600 font-bold">
              +{fortune.points} ν¬μΈνΈ νλ“!
            </div>
          )}
        </div>
      ) : (
        <div className="text-center">
          <p className="text-gray-600 mb-4">μ¤λμ μ΄μ„Έλ¥Ό ν™•μΈν•΄λ³΄μ„Έμ”!</p>
          <button
            onClick={playFortune}
            disabled={loading || !canPlay}
            className="px-6 py-3 bg-[#FFBF00] text-[#1A2B4E] rounded-xl font-bold hover:bg-[#FFBF00]/90 transition disabled:opacity-50"
          >
            {loading ? 'ν™•μΈ μ¤‘...' : 'μ΄μ„Έ λ³΄κΈ°'}
          </button>
        </div>
      )}
    </div>
  )
}
```

### 2. λ£°λ › κ²μ„ μ»΄ν¬λ„νΈ
```typescript
// components/RouletteGame.tsx
'use client'

import { useState } from 'react'
import { auth, db } from '@/lib/firebase'

const rewards = [
  { name: 'μ†μ•΅ ν¬μΈνΈ', points: 10, emoji: 'π’°', probability: 40 },
  { name: 'μ¤‘μ•΅ ν¬μΈνΈ', points: 50, emoji: 'π’µ', probability: 30 },
  { name: 'λ€μ•΅ ν¬μΈνΈ', points: 100, emoji: 'π’', probability: 20 },
  { name: 'νΉλ³„ λ°°μ§€', points: 0, emoji: 'π†', probability: 10 },
]

export default function RouletteGame() {
  const [spinning, setSpinning] = useState(false)
  const [result, setResult] = useState<any>(null)

  const spin = () => {
    if (spinning) return
    
    setSpinning(true)
    
    // λ£°λ › μ• λ‹λ©”μ΄μ…
    setTimeout(() => {
      // ν™•λ¥ μ— λ”°λΌ λ³΄μƒ μ„ νƒ
      const random = Math.random() * 100
      let cumulative = 0
      let selectedReward = rewards[0]
      
      for (const reward of rewards) {
        cumulative += reward.probability
        if (random <= cumulative) {
          selectedReward = reward
          break
        }
      }
      
      setResult(selectedReward)
      setSpinning(false)
      
      // Firebaseμ— μ €μ¥ λ° ν¬μΈνΈ μ§€κΈ‰
      saveResult(selectedReward)
    }, 3000) // 3μ΄ μ• λ‹λ©”μ΄μ…
  }

  return (
    <div className="bg-white rounded-2xl p-6 shadow-lg">
      <h3 className="text-xl font-bold mb-4">μ‚¬μ¥λ‹ λ£°λ ›</h3>
      
      <div className="relative w-64 h-64 mx-auto mb-4">
        {/* λ£°λ › UI */}
        <div className={`w-full h-full rounded-full border-4 border-[#1A2B4E] ${spinning ? 'animate-spin' : ''}`}>
          {/* λ£°λ › μ„Ήμ…λ“¤ */}
        </div>
      </div>
      
      <button
        onClick={spin}
        disabled={spinning}
        className="w-full px-6 py-3 bg-[#FFBF00] text-[#1A2B4E] rounded-xl font-bold hover:bg-[#FFBF00]/90 transition disabled:opacity-50"
      >
        {spinning ? 'λλ¦¬λ” μ¤‘...' : 'λ£°λ › λλ¦¬κΈ°'}
      </button>
      
      {result && (
        <div className="mt-4 text-center">
          <div className="text-4xl mb-2">{result.emoji}</div>
          <div className="font-bold text-lg">{result.name}</div>
          {result.points > 0 && (
            <div className="text-green-600">+{result.points} ν¬μΈνΈ!</div>
          )}
        </div>
      )}
    </div>
  )
}
```

## π¨ κ²μ„ νμ΄μ§€ κµ¬μ΅°

```
app/games/page.tsx
β”β”€β”€ FortuneGame (μ΄μ„Έ κ²μ„)
β”β”€β”€ RouletteGame (λ£°λ › κ²μ„)
β”β”€β”€ LotteryGame (λ³µκ¶ κ²μ„)
β””β”€β”€ RandomBoxGame (λλ¤ λ°•μ¤ κ²μ„)
```

## π“ ν¬μΈνΈ μ‹μ¤ν… μ—°λ™

κ²μ„μ—μ„ νλ“ν• ν¬μΈνΈλ” κΈ°μ΅΄ ν¬μΈνΈ μ‹μ¤ν…κ³Ό μ—°λ™:
- κ²μ„ ν¬μΈνΈ β†’ μ‚¬μ©μ ν¬μΈνΈμ— ν•©μ‚°
- κ²μ„ λ‚΄μ—­ β†’ ν¬μΈνΈ νμ¤ν† λ¦¬μ— κΈ°λ΅
- κ²μ„ μ—…μ  β†’ μ‚¬μ©μ μ—…μ μ— μ¶”κ°€

## π€ κµ¬ν„ μ‹μ‘ν•κΈ°

κ°€μ¥ κ°„λ‹¨ν• **μ΄μ„Έ κ²μ„**λ¶€ν„° μ‹μ‘ν•λ” κ²ƒμ„ μ¶”μ²ν•©λ‹λ‹¤:
1. κµ¬ν„ λ‚μ΄λ„κ°€ λ‚®μ
2. κΈ°μ΅΄ μ΄μ„Έ λ©”λ‰΄μ™€ ν†µν•© κ°€λ¥
3. μ‚¬μ©μ μ°Έμ—¬λ„ λ†’μ
4. ν¬μΈνΈ μ‹μ¤ν…κ³Ό μμ—°μ¤λ½κ² μ—°λ™

μ›ν•μ‹λ” κ²μ„μ„ μ„ νƒν•΄μ£Όμ‹λ©΄ λ°”λ΅ κµ¬ν„ν•΄λ“λ¦¬κ² μµλ‹λ‹¤!

