# 결정장애 투표 기능 아이디어 💭

## 📋 개요
자영업자 사장님들이 사업 관련 결정을 내리기 어려울 때, 다른 사장님들의 의견을 듣고 투표를 통해 결정을 내릴 수 있는 기능입니다.

---

## 🎯 핵심 기능

### 1. 투표 게시글 작성
- **제목**: "치킨집 포장 용기 바꿀까요?" 
- **질문**: 간단한 상황 설명 + 선택지 2개
- **선택지 A**: 예) "종이 포장으로 전환 (환경 친화적)"
- **선택지 B**: 예) "기존 플라스틱 유지 (비용 절감)"
- **상황 설명**: 자유롭게 설명 (선택사항)
- **마감 시간**: 24시간, 48시간, 1주일 등 설정 가능

### 2. 투표 참여
- **실시간 투표**: 클릭 한 번으로 선택
- **투표 변경**: 마감 전까지 변경 가능 (또는 불가능 옵션)
- **실시간 결과**: 투표율, 댓글 수, 좋아요 수
- **익명/기명 선택**: 투표 참여 시 익명 여부 선택

### 3. 결과 표시
- **막대 그래프**: A vs B 비율 시각화
- **통계 정보**:
  - 총 투표 수
  - 각 선택지 득표수/비율
  - 업종별 분류 (치킨, 카페, 한식 등)
  - 지역별 분류 (선택사항)
- **추천 댓글**: 각 선택지에 대한 의견 댓글
- **뱃지**: "인기 투표", "마감 임박" 등

### 4. 상호작용
- **댓글**: 각 선택지에 대한 의견 남기기
- **좋아요/공감**: 투표 게시글에 공감 표현
- **공유**: 다른 사장님에게 공유
- **북마크**: 나중에 결과 확인

---

## 🎨 UI/UX 디자인 아이디어

### 메인 화면
```
┌─────────────────────────────────┐
│ 🔥 인기 투표                     │
│ ─────────────────────────────   │
│                                 │
│ ⏰ 3시간 남음                    │
│                                 │
│ 💭 치킨집 포장 용기 바꿀까요?    │
│                                 │
│ ┌─────────┐  ┌─────────┐       │
│ │ 종이용기 │  │ 플라스틱 │       │
│ │   65%   │  │   35%   │       │
│ │ [████] │  │ [██]   │       │
│ └─────────┘  └─────────┘       │
│                                 │
│ 💬 23개 의견  👍 45              │
└─────────────────────────────────┘
```

### 투표 상세 화면
- **상단**: 투표 제목 + 설명
- **중앙**: 큰 막대 그래프 (A vs B)
- **하단**: 
  - 댓글 섹션 (A 선택자 / B 선택자 탭)
  - 참여 사장님 목록 (업종/지역 표시)
  - 관련 투표 추천

---

## 📊 데이터 구조 (Firestore)

### `decision_polls` 컬렉션
```typescript
{
  id: string
  authorId: string
  authorName: string
  title: string // "치킨집 포장 용기 바꿀까요?"
  description: string // 상황 설명 (선택)
  optionA: {
    text: string // "종이 포장으로 전환"
    votes: number // 65
    voters: string[] // [uid1, uid2, ...] (선택사항)
  }
  optionB: {
    text: string // "기존 플라스틱 유지"
    votes: number // 35
    voters: string[] // [uid1, uid2, ...] (선택사항)
  }
  category: string // "대나무숲", "꿀팁공유" 등
  businessType: string // "치킨", "카페" 등
  region: string // "서울", "경기" 등 (선택)
  deadline: Timestamp // 마감 시간
  createdAt: Timestamp
  updatedAt: Timestamp
  likes: number
  comments: number
  views: number
  allowChangeVote: boolean // 투표 변경 허용 여부
  isAnonymous: boolean // 익명 투표 여부
  status: 'active' | 'closed' // 진행중 | 종료
}
```

### `poll_votes` 서브컬렉션 (또는 별도 컬렉션)
```typescript
// polls/{pollId}/votes/{userId}
{
  userId: string
  selectedOption: 'A' | 'B'
  isAnonymous: boolean
  votedAt: Timestamp
}
```

### `poll_comments` 서브컬렉션
```typescript
// polls/{pollId}/comments/{commentId}
{
  userId: string
  authorName: string
  content: string
  option: 'A' | 'B' | null // 어떤 선택지에 대한 의견인지
  createdAt: Timestamp
  likes: number
}
```

---

## 🚀 구현 단계

### Phase 1: 기본 기능 (1주)
1. ✅ 투표 게시글 작성 UI
2. ✅ 투표 참여 기능
3. ✅ 실시간 결과 표시
4. ✅ 기본 댓글 기능

### Phase 2: 고급 기능 (1주)
5. ✅ 통계 및 그래프 시각화
6. ✅ 투표 변경 기능
7. ✅ 마감 시간 타이머
8. ✅ 업종/지역별 필터링

### Phase 3: 상호작용 (1주)
9. ✅ 좋아요, 공유, 북마크
10. ✅ 관련 투표 추천
11. ✅ 알림 (마감 임박, 결과 발표)
12. ✅ 모바일 최적화

---

## 💡 활용 예시

### 1. 사업 결정
- "새 메뉴 추가할까요? A) 떡볶이 B) 순대"
- "배달비 인상할까요? A) 예 B) 아니오"
- "카운터 위치 바꿀까요? A) 창가로 B) 현위치 유지"

### 2. 장비 구매
- "새 포스기 구매할까요? A) 신형 구매 B) 중고 구매"
- "에어컨 추가 설치할까요? A) 예 B) 아니오"

### 3. 운영 전략
- "영업시간 연장할까요? A) 연장 B) 현행 유지"
- "직원 추가 고용할까요? A) 예 B) 아니오"

### 4. 디자인/인테리어
- "가게 색깔 바꿀까요? A) 밝은 톤 B) 어두운 톤"
- "로고 디자인 A안 vs B안"

---

## 🎯 차별화 포인트

### 1. 자영업자 특화
- 업종별 필터링 (치킨, 카페, 한식 등)
- 지역별 분류
- 실무 경험 기반 의견

### 2. 실시간 소통
- 실시간 투표 현황
- 즉시 댓글 및 피드백
- 마감 임박 알림

### 3. 데이터 기반 의사결정
- 통계 시각화
- 과거 유사 투표 추천
- 트렌드 분석

### 4. 커뮤니티 강화
- 투표 주제 토론
- 베스트 의견 하이라이트
- 투표 후 결과 공유

---

## 📱 UI 컴포넌트 구조

### 컴포넌트
1. `DecisionPollCard` - 투표 카드 (목록용)
2. `DecisionPollDetail` - 투표 상세 페이지
3. `PollCreateModal` - 투표 생성 모달
4. `VoteButtons` - 투표 버튼 (A/B)
5. `PollResultsChart` - 결과 차트
6. `PollComments` - 댓글 섹션
7. `PollTimer` - 마감 타이머

### 페이지
- `/polls` - 투표 목록
- `/polls/[id]` - 투표 상세
- `/polls/create` - 투표 생성

---

## 🔧 기술 스펙

### 라이브러리
- **차트**: `recharts` 또는 `chart.js`
- **애니메이션**: Framer Motion
- **UI**: 기존 Tailwind CSS

### Firebase 기능
- Firestore: 실시간 투표 데이터
- Firestore Transactions: 투표 중복 방지
- Firestore Queries: 필터링 및 정렬

---

## ⚠️ 주의사항

1. **투표 조작 방지**
   - 중복 투표 방지
   - 서버 사이드 검증
   - 로그인 필수

2. **익명성 보장**
   - 투표자 정보 암호화 (선택사항)
   - 익명 모드 옵션

3. **마감 처리**
   - 자동 마감 (Cron Job 또는 Cloud Functions)
   - 결과 고정

4. **스팸 방지**
   - 일일 투표 생성 제한
   - 부적절한 내용 신고 기능

---

## 🎨 추가 아이디어

### 1. 투표 카테고리
- 💼 사업 운영
- 💰 재무/구매
- 🎨 디자인/인테리어
- 👥 인사/인력
- 📢 마케팅
- 🍽️ 메뉴 개발

### 2. 특별 기능
- **긴급 투표**: 빠른 결정이 필요한 경우 (1시간 마감)
- **베스트 의견**: 가장 많은 공감을 받은 댓글 하이라이트
- **투표 히스토리**: 내가 만든/참여한 투표 모아보기
- **비슷한 투표**: 과거 유사한 주제 추천

### 3. 통계 대시보드
- 업종별 선호도
- 트렌드 분석
- 인기 투표 주제

---

이 기능을 통해 자영업자 커뮤니티의 상호작용을 높이고, 실질적인 도움을 제공할 수 있을 것입니다! 🚀

